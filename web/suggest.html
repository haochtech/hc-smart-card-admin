<html style="font-size: 48px;"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
  <title>意见反馈</title>
    <style>
        body, dd, dl, dt { margin: 0; padding: 0; } body { -webkit-user-select: none; -webkit-text-size-adjust: 100%; background-color: #fff; } body, html { width: 100%; height: 100%; overflow: auto; } #app { font-family: PingFangSC-Regular,Avenir,Helvetica,Arial,sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; color: #2c3e50; } .problme-mask[data-v-8e41ae7c] { position: fixed; top: 0; bottom: 0; left: 0; right: 0; background-color: rgba(0, 0, 0, .5); z-index: 999; } .problme-mask ul[data-v-8e41ae7c] { position: absolute; bottom: 0; left: 0; right: 0; font-size: .36rem; color: #000; text-align: center; line-height: 1rem; } li, ul { list-style: none; } ul { margin: 0; padding: 0; } .problme-mask ul li[data-v-8e41ae7c] { background-color: #fff; height: 1rem; box-sizing: border-box; border-bottom: 1px solid #f0f0f0; } .problme-mask ul li[data-v-8e41ae7c]:last-of-type { border-top: .12rem solid #cdcdd1; border-bottom: none; } .opinion-wrap[data-v-8e41ae7c] { position: fixed; top: 0; left: 0; right: 0; bottom: 1.5rem; overflow: hidden; } .problme-type[data-v-8e41ae7c] { width: 7.5rem; height: .87rem; font-size: 0; color: #000; line-height: .87rem; background-color: #fff; margin-top: .3rem; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAaCAYAAAC+aNwHAAAAAXNSR0IArs4c6QAAAjJJREFUOBGNlM9L3EAUx2dGl+JFsHjwutA9L3WFTc7Fm6AealGwUilaq4gFQVAs/qIIYkEFFS0ttmBBDz2UQg89eEsiu/sfCP4BXgsVzIzft3FsZjZrdg6Zmffe55v3Zl7C2N0IgspLzysdKqW4tjUyN1MQ4EGAX7AUWGOpxjnnqhEBHgSl51Ky7whuigH7jlN424iIkJL3WjDpvEEmOzHBukvhOJ0j8B7ZEShj0vdLW7bd3gukGSLdV0KwPdupFJv2vPJH2x7fC9pQrcViF2pmm3FntFbvfL+8UWuPLFUB7XScrlmIrOq9nlHOLA57Xe/jc+Kde15ljjGZAPAPrltYSBWggCAoT+EMtvF24yWUITJ9r0UMpzbq2fcro4wp6k6jVCH4UrFYWKa4BwUogLpUSvkVy2rXki0aYtF1O9dSBSgYB9iHbj3F0hBBOfNGapFy7RNn8cSGoyjelpoBvtBpBNd0JHpnCw0486AA4AnAu9Hb/j8B7wKeJEtdAdT9Gjd4YF8jmE+Ax6h76woAHgH82b4+AEf03Wg4UQDwEOBvCfAx4GHAkkA9jBIAJ/1cEMtP8NkPAQ41qOd7AcCJdw34B+ABwDcais/VPkDf9+CuT+AwGgXwz0xGvagHkxA/P688C0P1Cz3/KK4M1+/29ta+XC53bdrNnQhDfgHTlWnmfzo6HvenwcQI1316ibkbfV0VwXyGtHuz2ew/Ckgb94eI31YBZay0tGQG8vn83zRQ+28BQA3Mj9aoXHAAAAAASUVORK5CYII=); background-repeat: no-repeat; background-size: .16rem .26rem; background-position: 7.04rem; margin-bottom: .3rem; } .problme-type span[data-v-8e41ae7c]:first-of-type { margin-right: .44rem; margin-left: .3rem; } .problme-type span[data-v-8e41ae7c] { font-size: .34rem; } .problme-box[data-v-8e41ae7c] { width: 7.5rem; min-height: 1.84rem; background-color: #fff; border-top: 1px solid #e5e5e5; border-bottom: 1px solid #e5e5e5; margin-bottom: .32rem; } .problme-phone[data-v-8e41ae7c] { height: .87rem; font-size: .34rem; color: #000; margin-left: .3rem; border-bottom: 1px solid #e5e5e5; line-height: .87rem; } .problme-phone input[data-v-8e41ae7c] { border: none; outline: none; height: .84rem; padding: 0; margin-left: .44rem; font-size: .34rem; width: 5.2rem; } .opinion-context[data-v-8e41ae7c] { min-height: 1.84rem; position: relative; } .opinion-context-title[data-v-8e41ae7c] { font-size: .34rem; color: #000; position: absolute; top: .2rem; left: .3rem; bottom: 0; } .opinion-context textarea[data-v-8e41ae7c] { padding-right: .3rem; padding-bottom: .2rem; border: none; outline: none; resize: none; font-size: .34rem; line-height: .48rem; width: 5.1rem; position: absolute; right: 0; top: .2rem; bottom: 0; } .opinion-fontnum[data-v-8e41ae7c] { position: absolute; right: .15rem; bottom: 0; font-size: .24rem; color: #a1a1ac; } .save-opinion[data-v-8e41ae7c] { margin: 0 auto; margin-top: .6rem; width: 6.7rem; height: .94rem; background: #0eb799; border: 1px solid rgba(5, 5, 5, .08); border-radius: .1rem; text-align: center; font-size: .36rem; color: #fff; line-height: .94rem; }
    </style>
    <link rel="stylesheet" href="./vue/css/iconfont.css">
    <script src="https://pingjs.qq.com/h5/stats.js?v2.0.4" name="MTAH5" sid="500619036"></script>
    <script type="text/ecmascript">
        var winWidth = 750
        window.onresize = function () {
            getRem(winWidth, 100)
        }
        function getRem(pwidth, prem) {
            var html = document.getElementsByTagName('html')[0]
            var oWidth = document.documentElement.clientWidth
            html.style.fontSize = oWidth / pwidth * prem + 'px'
        }
        (function () {
            if (typeof WeixinJSBridge == "object" && typeof WeixinJSBridge.invoke == "function") {
                handleFontSize();
            } else {
                document.addEventListener("WeixinJSBridgeReady", handleFontSize, false);
            }
            function handleFontSize() {
                // 设置网页字体为默认大小
                WeixinJSBridge.invoke('setFontSizeCallback', {
                    'fontSize': 0
                });
                // 重写设置网页字体大小的事件
                WeixinJSBridge.on('menu:setfont', function () {
                    WeixinJSBridge.invoke('setFontSizeCallback', {
                        'fontSize': 0
                    });
                });
            }

            function onBridgeReady() {
                WeixinJSBridge.call('hideOptionMenu');
            }

            if (typeof WeixinJSBridge == "undefined") {
                if (document.addEventListener) {
                    document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
                } else if (document.attachEvent) {
                    document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                    document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
                }
            } else {
                onBridgeReady();
            }
        })()
        getRem(winWidth, 100)
    </script>
    <script src="vue/js/common.js"></script>
    <script src="vue/js/vue.js"></script>
    <script src="vue/js/vue-resource.js"></script>
    <script>
        window.onload = function () {

            var theRequest = GetRequest();
            var __UID__ = theRequest["uid"];
            var MCHID = theRequest["mch_id"];
            var domain = window.location.host;
            var path_name = window.location.pathname;
            var child_name = path_name.split("/addons");
            var url = "https://" + domain + child_name[0] + "/addons/yb_mingpian/core/index.php?mch_id=" + MCHID + "&s=/web/";
            var vue_obj = new Vue({
                el: '#app',
                data: {
                    show: true,
                    loaded: false,
                    select_type: false,
                    sug_name: '',
                    inputCnt: 0,
                    post_data: {
                        sug_type: 0,
                        phone: '',
                        content: '',
                    }
                },
        created:function(){
        },
        methods:{
            select_ty:function(i,n){
              this.sug_name=n;
              this.post_data.sug_type=i;
              this.select_type=false;
            },
            // 显示已输入建议字数
            descInput:function() {
                var textVal = this.post_data.content.length;
                this.inputCnt = textVal;
            },
        send_post:function(){
          var that=this;
          if(that.loaded){
            return;
          }
          var data=that.post_data;
          if(data.sug_type==0){
            msg('请选择问题类型');return;
          }else if(data.phone.length!=11){
            msg('填写11位的手机号');return;
          }else if(data.content==''){
            msg('建议描述不能为空');return;
          }
          data.uid=__UID__;
           that.loaded=true;
                this.$http.get(url+'Webindex/suggest',data).then(function(res){
                    if (typeof res.data == 'string') {
                        res.data = json_parse(res.data);
                    }
                    that.loaded=false;
                    if(res.data.code==0){
                        layer.open({
                          content: '提交成功,感谢您的反馈！'
                          ,btn: '我知道了'
                        });
                       that.post_data.phone='';
                       that.post_data.sug_type=0;
                       that.post_data.content='';
                       that.sug_name='';
                    }else{
                          layer.open({
                            content: res.data.msg,skin: 'msg',time: 2 //2秒后自动关闭
                          });
                    }
                },function(res){
                  that.loaded=false;
                    msg('接口异常');
                });  
        }
        }    
    });
};
    </script>
</head>
<body>
<div id="app">
    <section data-v-8e41ae7c="">
        <div data-v-8e41ae7c="" class="problme-mask" style="display: none;" v-show="select_type">
            <ul data-v-8e41ae7c="">
                <li data-v-8e41ae7c="" @click="select_ty(1,'功能异常')">功能异常</li>
                <li data-v-8e41ae7c="" @click="select_ty(2,'客户服务')">客户服务</li>
                <li data-v-8e41ae7c="" @click="select_ty(3,'产品建议')">产品建议</li>
                <li data-v-8e41ae7c="" @click="select_ty(4,'其他')">其他</li>
            </ul>
        </div>
        <div data-v-8e41ae7c="" class="opinion-wrap"  style="display: none;" v-show="show">
            <div data-v-8e41ae7c=""
                 style="transition-property: transform; transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1); transition-duration: 0ms; transform: translate(0px, 0px) scale(1) translateZ(0px);">
                <div data-v-8e41ae7c="" class="problme-type" style="pointer-events: auto;" @click="select_type=true"><span data-v-8e41ae7c="">请选择问题类型</span>
                    <span data-v-8e41ae7c="">{{sug_name}}</span>
                  </div>
                <div data-v-8e41ae7c="" class="problme-box" style="pointer-events: auto;">
                    <div data-v-8e41ae7c="" class="problme-phone"><span data-v-8e41ae7c="">手机号码</span> <input
                            data-v-8e41ae7c="" type="text" placeholder="填写后方便我们与您联系" v-model="post_data.phone" ></div>
                    <div data-v-8e41ae7c="" class="opinion-context" style="height:200px">
                        <div data-v-8e41ae7c="" class="opinion-context-title">建议描述</div>
                        <textarea data-v-8e41ae7c="" maxlength="500" v-model="post_data.content"
                                  placeholder="对我们的产品或服务，你还有什么建议吗？你希望我们为你解决什么问题？请告诉我们…" @input="descInput"></textarea> <span
                            data-v-8e41ae7c="" class="opinion-fontnum">{{inputCnt}}/500</span></div>
                </div>
                <div data-v-8e41ae7c="" class="save-opinion" @click="send_post()" style="pointer-events: auto;">提交</div>
            </div>
        </div>
    </section>
</div>
<script src="./vue/js/jquery-1.7.2.js"></script>
  <script src="./vue/js/layer.js"></script>
</body></html>